package middle

var InjectorCode = "ZnVuY3Rpb24gaG9vaygpIHsKICBjb25zdCBlbGVjdHJvbiA9IHJlcXVpcmUoImVsZWN0cm9uIik7CiAgY29uc3QgcGF0aCA9IHJlcXVpcmUoInBhdGgiKTsKICBjb25zdCBmcyA9IHJlcXVpcmUoImZzIik7CgogIC8vI3JlZ2lvbiBGaXggcGF0aCBhbmQgZ2V0IG9yaWdpbmFsIGFwcAogIGNvbnN0IGJhc2VQYXRoID0gcGF0aC5qb2luKHBhdGguZGlybmFtZShyZXF1aXJlLm1haW4uZmlsZW5hbWUpLCAiLi4iKTsKICBjb25zdCBwbHVnUGF0aCA9IHBhdGguam9pbihiYXNlUGF0aCwgInBsdWciKTsKCiAgbGV0IG9yaWdpbmFsQXBwUGF0aCA9IGZzLmV4aXN0c1N5bmMocGx1Z1BhdGgpID8gcGx1Z1BhdGggOiBwYXRoLmpvaW4oYmFzZVBhdGgsICJhcHAuYXNhciIpOwoKICBjb25zdCBvcmlnaW5hbFBhY2thZ2UgPSByZXF1aXJlKHBhdGgucmVzb2x2ZSgKICAgIHBhdGguam9pbihvcmlnaW5hbEFwcFBhdGgsICJwYWNrYWdlLmpzb24iKQogICkpOwoKICByZXF1aXJlLm1haW4uZmlsZW5hbWUgPSBwYXRoLmpvaW4ob3JpZ2luYWxBcHBQYXRoLCBvcmlnaW5hbFBhY2thZ2UubWFpbik7CgogIGVsZWN0cm9uLmFwcC5zZXRBcHBQYXRoKG9yaWdpbmFsQXBwUGF0aCk7CiAgZWxlY3Ryb24uYXBwLm5hbWUgPSBvcmlnaW5hbFBhY2thZ2UubmFtZTsKICAvLyNlbmRyZWdpb24KCiAgY29uc3QgZWxlY3Ryb25DYWNoZSA9IHJlcXVpcmUuY2FjaGVbcmVxdWlyZS5yZXNvbHZlKCJlbGVjdHJvbiIpXTsKCiAgLy8jcmVnaW9uIENTUCBSZW1vdmFsCiAgZWxlY3Ryb24uYXBwLm9uKCJyZWFkeSIsICgpID0+IHsKICAgIC8vIFJlbW92ZXMgQ1NQCiAgICBlbGVjdHJvbi5zZXNzaW9uLmRlZmF1bHRTZXNzaW9uLndlYlJlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWQoCiAgICAgICh7IHJlc3BvbnNlSGVhZGVycyB9LCBkb25lKSA9PiB7CiAgICAgICAgY29uc3QgY3NwSGVhZGVycyA9IE9iamVjdC5rZXlzKHJlc3BvbnNlSGVhZGVycykuZmlsdGVyKChuYW1lKSA9PgogICAgICAgICAgbmFtZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImNvbnRlbnQtc2VjdXJpdHktcG9saWN5IikKICAgICAgICApOwoKICAgICAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiBjc3BIZWFkZXJzKSB7CiAgICAgICAgICBkZWxldGUgcmVzcG9uc2VIZWFkZXJzW2hlYWRlcl07CiAgICAgICAgfQoKICAgICAgICBkb25lKHsgcmVzcG9uc2VIZWFkZXJzIH0pOwogICAgICB9CiAgICApOwoKICAgIC8vIFByZXZlbnRzIG90aGVyIG1vZHMgZnJvbSByZW1vdmluZyBDU1AKICAgIGVsZWN0cm9uQ2FjaGUuZXhwb3J0cy5zZXNzaW9uLmRlZmF1bHRTZXNzaW9uLndlYlJlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWQgPQogICAgICAoKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coIltSYXdEb2ddIFByZXZlbnRlZCBDU1AgZnJvbSBiZWluZyBtb2RpZmllZC4uLiIpOwogICAgICB9OwogIH0pOwogIC8vI2VuZHJlZ2lvbgoKICAvLyNyZWdpb24gSG9vayBpbnRvIERpc2NvcmQgd2luZG93cwogIGNvbnN0IGluamVjdGlvbkNvZGUgPSBgKCgpID0+IHsKICBpZiAoIXdpbmRvdy5jdW1jb3JkICYmICF3aW5kb3cuX0NDRGVza3RvcEluamVjdGluZykgewogICAgd2luZG93Ll9DQ0Rlc2t0b3BJbmplY3RpbmcgPSB0cnVlOwogICAgbGV0IHJlYWR5VGhlcmUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd2aWRlb1tjbGFzcyo9InJlYWR5LSJdJykpIHsKICAgICAgICBjbGVhckludGVydmFsKHJlYWR5VGhlcmUpOwogICAgICAgIGxldCByZWFkeUdvbmUgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7CiAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvW2NsYXNzKj0icmVhZHktIl0nKSkgewogICAgICAgICAgICBjbGVhckludGVydmFsKHJlYWR5R29uZSk7CiAgICAgICAgICAgIGV2YWwoCiAgICAgICAgICAgICAgYXdhaXQgKAogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goCiAgICAgICAgICAgICAgICAgICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQ3VtY29yZC9DdW1jb3JkL3N0YWJsZS9kaXN0L2J1aWxkLmpzIiwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGNhY2hlOiAibm8tc3RvcmUiLAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgKS50ZXh0KCkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgZGVsZXRlIHdpbmRvdy5fQ0NEZXNrdG9wSW5qZWN0aW5nOwogICAgICAgICAgfQogICAgICAgIH0sIDUwKTsKICAgICAgfQogICAgfSwgNTApOwogIH0KfSkoKTtgCgogIGNvbnN0IHsgQnJvd3NlcldpbmRvdyB9ID0gZWxlY3Ryb247CiAgY29uc3QgcHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGVsZWN0cm9uQ2FjaGUuZXhwb3J0cyk7CgogIGRlbGV0ZSBlbGVjdHJvbkNhY2hlLmV4cG9ydHM7CiAgLy8gTWFrZSBhIG5ldyBlbGVjdHJvbiB0aGF0IHdpbGwgdXNlIHRoZSBuZXcgJ0Jyb3dzZXJXaW5kb3cnCiAgY29uc3QgbmV3RWxlY3Ryb24gPSB7fQogIGZvciAoY29uc3QgcHJvcGVydHlOYW1lIG9mIHByb3BlcnR5TmFtZXMpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdFbGVjdHJvbiwgcHJvcGVydHlOYW1lLCB7CiAgICAgIC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZWxlY3Ryb24sIHByb3BlcnR5TmFtZSksCiAgICAgIGdldDogKCkgPT4gcHJvcGVydHlOYW1lID09PSAiQnJvd3NlcldpbmRvdyIgPyBjbGFzcyBleHRlbmRzIEJyb3dzZXJXaW5kb3cgewogICAgICAgIGNvbnN0cnVjdG9yKG9wdHMpIHsKICAgICAgICAgIGNvbnN0IHdpbmRvdyA9IG5ldyBCcm93c2VyV2luZG93KG9wdHMpOwoKICAgICAgICAgIC8vIEluIGNhc2UgQ2FuYXJ5IG9yIFBUQiBhZGQgdGhlbXNlbHZlcyB0byB0aGUgbmFtZSBsYXRlcgogICAgICAgICAgaWYgKHdpbmRvdy50aXRsZS5zdGFydHNXaXRoKCJEaXNjb3JkIikpIHsKICAgICAgICAgICAgd2luZG93LndlYkNvbnRlbnRzLm9uKCJkaWQtZmluaXNoLWxvYWQiLCAoKSA9PiB7CiAgICAgICAgICAgICAgd2luZG93LndlYkNvbnRlbnRzLmV4ZWN1dGVKYXZhU2NyaXB0KGluamVjdGlvbkNvZGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gd2luZG93OwogICAgICAgIH0KICAgICAgfSA6IGVsZWN0cm9uW3Byb3BlcnR5TmFtZV0KICAgIH0pCiAgfQoKICBlbGVjdHJvbkNhY2hlLmV4cG9ydHMgPSBuZXdFbGVjdHJvbjsKICAvLyNlbmRyZWdpb24KCiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKG9yaWdpbmFsQXBwUGF0aCk7Cn0KCmhvb2soKTs="

